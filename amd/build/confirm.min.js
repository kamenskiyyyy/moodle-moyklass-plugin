/**
 * @package
 * @author      Nikolay
 * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_moyclass/confirm",["jquery","core/modal_factory","core/str","core/modal_events","core/ajax","core/notification"],(function($,ModalFactory,String,ModalEvents,Ajax,Notification){const trigger=$(".local_moyclass_delete_button");ModalFactory.create({type:ModalFactory.types.SAVE_CANCEL,title:String.get_string("moyclass_delete_record_title","local_moyclass"),body:String.get_string("moyclass_delete_record_desc","local_moyclass"),preShowCallback:function(triggerElement,modal){let classString=(triggerElement=$(triggerElement))[0].classList[0],recordid=classString.substr(classString.lastIndexOf("local_recordid")+"local_recordid".length);modal.params={recordid:recordid},modal.setSaveButtonText(String.get_string("moyclass_delete_record_title","local_moyclass"))},large:!0},trigger).done((function(modal){modal.getRoot().on(ModalEvents.save,(function(e){e.preventDefault();let footer=Y.one(".modal-footer");footer.setContent(String.get_string("moyclass_delete_record_loading","local_moyclass")),M.util.add_spinner(Y,footer).show();let request={methodname:"local_moyclass_delete_record",args:modal.params};Ajax.call([request])[0].done((function(data){!0===data?window.location.reload():Notification.addNotification({message:String.get_string("moyclass_delete_record_fail","local_moyclass"),type:"error"})})).fail(Notification.exception)}))}))}));

//# sourceMappingURL=confirm.min.js.map